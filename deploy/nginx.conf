server {
    listen 80;
    server_name _;  # Aceita qualquer IP/Domínio por enquanto (ideal: configurar domínio depois)

    # Redirecionar para HTTPS (opcional depois)
    # return 301 https://$host$request_uri;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        
        # Aumentar timeout para long polling / sockets
        proxy_read_timeout 300s;
        proxy_connect_timeout 300s;
    }

    # Configuração para arquivos estáticos (opcional, Node já serve public/)
    # location /public {
    #     alias /var/www/deliveryhub/public;
    # }
}
